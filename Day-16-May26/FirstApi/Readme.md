## Tasks for May 26

- Complete PUT & DELETE METHOD in DoctorController
- Complete PatientController w/ appropriate Models
 

## [DoctorController](./Controllers/DoctorController.cs)

### PUT Method

The PUT method takes in new doctor object (from request body) and finds if its present already, if not 404 not found is returned else the updation is done and its returned.

```csharp
        [HttpPut]
        public ActionResult<Doctor> UpdateDoctor([FromBody] Doctor updated_doctor)
        {
            int id = updated_doctor.Id;

            var doctor = doctorList.FirstOrDefault(doc => doc.Id == id);

            if (doctor == null)
                return NotFound();

            doctor.DoctorName = updated_doctor.DoctorName;
            return Ok(doctor);
        }
```

### DELETE Method

The delete method takes in id from the request body, finds if its present and deletes the record.

```csharp
        [HttpDelete]
        public ActionResult<List<Doctor>> DeleteDoctor([FromBody] int id)
        {
            var doctor = doctorList.FirstOrDefault(doc => doc.Id == id);

            if (doctor == null)
                return NotFound();

            doctorList.Remove(doctor);
            return doctorList;

        }
```


## [PatientController](./Controllers/PatientController.cs)

### Model

### Patient.cs
```csharp

namespace FirstApi.Models
{
    public class Patient
    {
        public int Id { get; set; }
        public string PatientName { get; set; } = string.Empty;
        public int Age { get; set; }
    }
}
```


### Methods

The *GET*, *DELETE*, *UPDATE* methods of the PatientController are similar to DoctorController

### POST METHOD

The post method here get only name and the age of the patient. This is by using **AddPatient** model

### AddPatient.cs

```csharp
namespace FirstApi.Models
{
    public class AddPatient
    {
        public string PatientName { get; set; } = string.Empty;
        public int Age { get; set; }
    }
}

```

The Id is auto-generated by the **GenerateId** Function 


```csharp
        private int GenerateId()
        {
            if (patientList == null)
            {
                return 1;
            }

            return patientList.Max(e => e.Id) + 1;
        }
```

#### The POST Method looks like this

```csharp
        [HttpPost]
        [ProducesResponseType(typeof(Patient), StatusCodes.Status201Created)]
        public ActionResult<List<Patient>> AddPatients([FromBody] AddPatient patient)
        {
            Patient new_patient = new Patient { Id = GenerateId(), Age = patient.Age, PatientName = patient.PatientName };
            patientList.Add(new_patient);
            return Created("", patientList);
        }
```

